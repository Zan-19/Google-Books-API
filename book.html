<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
  <title>Google Books Embedded Viewer API Example</title>
  <script type="text/javascript" src="https://www.google.com/books/jsapi.js"></script>
  <script type="text/javascript">
    google.books.load();

    function initialize() {
      var viewer = new google.books.DefaultViewer(document.getElementById('viewerCanvas'));

      // Use URLSearchParams for clean extraction
      const params = new URLSearchParams(window.location.search);
      const bookIsbn = params.get('isbn');

      if (bookIsbn) {
        viewer.load('ISBN:' + bookIsbn);
      } else {
        document.getElementById('viewerCanvas').innerText = "No ISBN provided in URL.";
      }
    }

    google.books.setOnLoadCallback(initialize);
  </script>
</head>
<body>
  <div id="viewerCanvas" style="width: 600px; height: 500px;"></div>
</body>
</html>
